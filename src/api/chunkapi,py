from src.api.app import ingest_chunks, IngestBody

@app.post("/upload-pdf")
async def upload_pdf(file: UploadFile = File(...)):
    try:
        # Convert PDF to JSON
        pdf_json = pdf_to_chunks(file)

        # Convert JSON into IngestBody
        body = IngestBody(**pdf_json)

        # Call your existing function
        result = ingest_chunks(body)

        return result

    except Exception as e:
        raise HTTPException(status_code=500, detail=str(e))
